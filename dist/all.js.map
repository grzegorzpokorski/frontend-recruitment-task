{"version":3,"file":"all.js","mappings":"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","sources":["webpack://gravity-global-recruitment-task/./src/js/main.js"],"sourcesContent":["\"use strict\";\r\n\r\n// get all section.section-with-image\r\nconst sections = document.querySelectorAll(\"section.section-with-image\");\r\n\r\n// api endpoint url\r\nconst endpoint = \"https://jsonplaceholder.typicode.com/users\";\r\n\r\n// crete modal element and return it\r\nconst createModal = async (counter, sectionId) => {\r\n  const modal = document.createElement(\"aside\");\r\n  modal.classList.value = \"modal\";\r\n  modal.setAttribute(\"role\", \"dialog\");\r\n  modal.setAttribute(\"aria-labelledby\", `${sectionId}-title`);\r\n  modal.setAttribute(\"aria-describedby\", `${sectionId}-describe`);\r\n  modal.setAttribute(\"aria-modal\", \"true\");\r\n\r\n  // aside.modal > section.header.modal__content\r\n  const modalSection = document.createElement(\"section\");\r\n  modalSection.classList.value = \"header modal__content\";\r\n\r\n  // aside.modal > section.header.modal__content > button.modal__close\r\n  const modalButtonClose = document.createElement(\"button\");\r\n  modalButtonClose.classList.value = \"modal__close\";\r\n  modalButtonClose.dataset.name = \"closeButton\";\r\n  modalButtonClose.ariaLabel = \"Close popup\";\r\n\r\n  // aside.modal > section.header.modal__content > button.modal__close > span.modal__close__icon\r\n  const modalCloseIcon = document.createElement(\"span\");\r\n  modalCloseIcon.classList.value = \"modal__close__icon\";\r\n  modalCloseIcon.setAttribute(\"aria-hidden\", \"true\");\r\n\r\n  // aside.modal > section.header.modal__content > h3.modal__title\r\n  const modalTitle = document.createElement(\"h2\");\r\n  modalTitle.classList.value = \"modal__title\";\r\n  modalTitle.innerText = \"Alert\";\r\n  modalTitle.setAttribute(\"id\", `${sectionId}-title`);\r\n\r\n  // aside.modal > section.header.modal__content > p\r\n  const modalInformation = document.createElement(\"p\");\r\n  modalInformation.innerHTML = `You have clicked <strong>${counter.value} times</strong> to related button.`;\r\n  modalInformation.setAttribute(\"id\", `${sectionId}-describe`);\r\n\r\n  // append icon to close button\r\n  modalButtonClose.appendChild(modalCloseIcon);\r\n\r\n  // appending elements to modal\r\n  modalSection.appendChild(modalButtonClose);\r\n  modalSection.appendChild(modalTitle);\r\n  modalSection.appendChild(modalInformation);\r\n\r\n  if (counter.value > 5) {\r\n    //aside.modal > section.header.modal__content > button.button[data-name=\"resetCounter\"]\r\n    const modalButtonReset = document.createElement(\"button\");\r\n    modalButtonReset.classList.value = \"button button--red\";\r\n    modalButtonReset.dataset.name = \"resetButton\";\r\n    modalButtonReset.innerHTML = \"Reset counter\";\r\n\r\n    modalSection.appendChild(modalButtonReset);\r\n  }\r\n\r\n  const loader = createLoader();\r\n  document.body.appendChild(loader);\r\n\r\n  try {\r\n    const data = await getData(endpoint);\r\n    const tableWithData = createTable(data);\r\n    modalSection.appendChild(tableWithData);\r\n  } catch (error) {\r\n    const tableError = document.createElement(\"p\");\r\n    tableError.classList.add(\"error\");\r\n    tableError.innerText = `data loading error [${error.message}]`;\r\n    modalSection.appendChild(tableError);\r\n  }\r\n\r\n  document.body.removeChild(loader);\r\n  modal.appendChild(modalSection);\r\n\r\n  return modal;\r\n};\r\n\r\nconst handleCloseModal = ({ target }, modal) => {\r\n  const closeButton = modal.querySelector('[data-name=\"closeButton\"]');\r\n  if(closeButton.contains(target)){\r\n    removeModal(modal);\r\n  }\r\n};\r\n\r\nconst handleEscapeKeyPress = ({ key }) => {\r\n  if (key === \"Escape\") {\r\n    removeModal(document.querySelector('[role=\"dialog\"]'));\r\n  }\r\n};\r\n\r\nconst removeModal = (modal) => {\r\n  modal.remove();\r\n  window.removeEventListener(\"keydown\", handleEscapeKeyPress);\r\n};\r\n\r\nconst getCounter = (id) => {\r\n  if (localStorage.getItem(id)) {\r\n    return { id: id, value: parseInt(localStorage.getItem(id)) };\r\n  } else {\r\n    return { id: id, value: 0 };\r\n  }\r\n};\r\n\r\nconst incrementCounter = ({ id, value }) => {\r\n  localStorage.setItem(id, value + 1);\r\n};\r\n\r\nconst resetCounter = (id) => {\r\n  localStorage.setItem(id, 0);\r\n};\r\n\r\nconst openModal = async (section, sectionId, increment = true) => {\r\n  // remove active modals\r\n  const activeModals = document.querySelectorAll('[role=\"dialog\"]');\r\n  if (activeModals) activeModals.forEach((item) => removeModal(item));\r\n\r\n  // increment coounter if it is necessary\r\n  if (increment) incrementCounter(getCounter(sectionId));\r\n\r\n  // create modal, append it to section and set focus to modal\r\n  const modal = await createModal(getCounter(sectionId), sectionId);\r\n  section.appendChild(modal);\r\n  modal.querySelector(\"button\").focus();\r\n\r\n  // add handle close modal by clicking\r\n  modal.addEventListener(\"click\", (event) => handleCloseModal(event, modal));\r\n  // add handle close modal by escape key press\r\n  window.addEventListener(\"keydown\", handleEscapeKeyPress);\r\n\r\n  // add actions after click resetButton in modal\r\n  modal.addEventListener(\"click\", ({ target }) => {\r\n    const resetButton = modal.querySelector('[data-name=\"resetButton\"]');\r\n    if (target === resetButton) {\r\n      resetCounter(sectionId);\r\n      removeModal(modal);\r\n      openModal(section, sectionId, false);\r\n    }\r\n  });\r\n};\r\n\r\nconst initModals = (sections) => {\r\n  // for each section\r\n  sections.forEach((section, i) => {\r\n    // add unique sectionId\r\n    const sectionId = `swi${i}`;\r\n    section.dataset.name = sectionId;\r\n\r\n    // add click handle function to opener button which open modal\r\n    const openButton = section.querySelector('[data-name=\"openButton\"]');\r\n    openButton.addEventListener(\"click\", () => openModal(section, sectionId));\r\n  });\r\n};\r\n\r\nconst createTable = (data) => {\r\n  const tableWrapper = document.createElement(\"div\");\r\n  tableWrapper.classList.value = \"modal__table-wrapper\";\r\n  const table = document.createElement(\"table\");\r\n  const heading = document.createElement(\"tr\");\r\n  const headingHTML =\r\n    \"<td>imie i nazwisko</td><td>email</td><td>adres</td><td>telefon</td><td>nazwa firmy</td>\";\r\n  heading.innerHTML = headingHTML;\r\n  table.appendChild(heading);\r\n\r\n  const createRow = (item) => {\r\n    const tr = document.createElement(\"tr\");\r\n\r\n    const data = [\r\n      item.name,\r\n      item.email,\r\n      item.address.city +\r\n        \", \" +\r\n        item.address.street +\r\n        \", \" +\r\n        item.address.suite,\r\n      item.phone,\r\n      item.company.name,\r\n    ];\r\n\r\n    data.forEach((i) => {\r\n      const td = document.createElement(\"td\");\r\n      td.innerText = i;\r\n      tr.appendChild(td);\r\n    });\r\n\r\n    return tr;\r\n  };\r\n\r\n  data.forEach((item) => {\r\n    table.appendChild(createRow(item));\r\n  });\r\n\r\n  tableWrapper.appendChild(table);\r\n\r\n  return tableWrapper;\r\n};\r\n\r\nconst getData = async (url) => {\r\n  return fetch(url).then((response) => response.json());\r\n  // .catch((error) => error);\r\n};\r\n\r\nconst createLoader = () => {\r\n  const loader = document.createElement(\"div\");\r\n  loader.classList.value = \"loader\";\r\n  loader.setAttribute(\"aria-hidden\", \"true\");\r\n\r\n  const spinner = document.createElement(\"span\");\r\n  spinner.classList.value = \"loader__spinner\";\r\n\r\n  loader.appendChild(spinner);\r\n\r\n  return loader;\r\n};\r\n\r\ninitModals(sections);\r\n"],"names":["sections","document","querySelectorAll","endpoint","createModal","counter","sectionId","modal","createElement","classList","value","setAttribute","modalSection","modalButtonClose","dataset","name","ariaLabel","modalCloseIcon","modalTitle","innerText","modalInformation","innerHTML","appendChild","modalButtonReset","loader","createLoader","body","data","getData","tableWithData","createTable","error","tableError","add","message","removeChild","handleCloseModal","target","closeButton","querySelector","contains","removeModal","handleEscapeKeyPress","key","remove","window","removeEventListener","getCounter","id","localStorage","getItem","parseInt","incrementCounter","setItem","resetCounter","openModal","section","increment","activeModals","forEach","item","focus","addEventListener","event","resetButton","initModals","i","openButton","tableWrapper","table","heading","headingHTML","createRow","tr","email","address","city","street","suite","phone","company","td","url","fetch","then","response","json","spinner"],"sourceRoot":""}