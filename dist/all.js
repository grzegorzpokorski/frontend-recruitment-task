"use strict";const sections=document.querySelectorAll("section.section-with-image"),createModal=(e,t)=>{const a=document.createElement("aside"),n=(a.classList.value="modal",a.setAttribute("role","dialog"),document.createElement("section")),o=(n.classList.value="header modal__content",document.createElement("button")),l=(o.classList.value="modal__close",o.dataset.name="closeButton",o.ariaLabel="Close popup",document.createElement("span")),s=(l.classList.value="modal__close__icon",document.createElement("h3")),c=(s.classList.value="modal__title",s.innerText="Alert",document.createElement("p"));if(c.innerHTML=`You have clicked <strong>${t.value} times</strong> to related button.`,o.appendChild(l),n.appendChild(o),n.appendChild(s),n.appendChild(c),5<t.value){const d=document.createElement("button");d.classList.value="button",d.dataset.name="resetButton",d.innerHTML="Reset counter",n.appendChild(d)}return a.appendChild(n),e.appendChild(a),a},getCounter=e=>localStorage.getItem(e)?{id:e,value:parseInt(localStorage.getItem(e))}:{id:e,value:0},incrementCounter=({id:e,value:t})=>{localStorage.setItem(e,t+1)},resetCounter=e=>{localStorage.setItem(e,0)},handleClose=({target:e},t)=>{var a=t.querySelector('[data-name="closeButton"]');if(e===t||e===a)closeModal(t);else do{if(e===a)return void closeModal(t)}while(null!=(e=e.parentNode))},closeModal=e=>{e.remove(),window.removeEventListener("keydown",handleEscapeKeyPress,!0)},handleEscapeKeyPress=({key:e})=>{"Escape"===e&&closeModal(document.querySelector('[role="dialog"]'))},handleOpen=(t,a,e=!1)=>{const n=document.querySelectorAll('[role="dialog"]'),o=(n&&n.forEach(e=>closeModal(e)),e||incrementCounter(getCounter(a)),createModal(t,getCounter(a)));o.focus(),o.addEventListener("click",e=>handleClose(e,o)),window.addEventListener("keydown",handleEscapeKeyPress,!0),o.addEventListener("click",({target:e})=>{e===o.querySelector('[data-name="resetButton"]')&&(resetCounter(a),closeModal(o),handleOpen(t,a,!0))})};sections.forEach((e,t)=>{const a="swi"+t,n=(e.dataset.name=a,e.querySelector('[data-name="openButton"]'));n.addEventListener("click",()=>{handleOpen(e,a)})});