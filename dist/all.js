(()=>{"use strict";const e=document.querySelectorAll("section.section-with-image"),t=({key:e})=>{"Escape"===e&&a(document.querySelector('[role="dialog"]'))},a=e=>{e.remove(),window.removeEventListener("keydown",t)},n=e=>localStorage.getItem(e)?{id:e,value:parseInt(localStorage.getItem(e))}:{id:e,value:0},d=async(e,s,l=!0)=>{const i=document.querySelectorAll('[role="dialog"]');i&&i.forEach((e=>a(e))),l&&(({id:e,value:t})=>{localStorage.setItem(e,t+1)})(n(s));const u=await(async(e,t)=>{const a=document.createElement("aside");a.classList.value="modal",a.setAttribute("role","dialog"),a.setAttribute("aria-labelledby",`${t}-title`),a.setAttribute("aria-describedby",`${t}-describe`),a.setAttribute("aria-modal","true");const n=document.createElement("section");n.classList.value="header modal__content";const d=document.createElement("button");d.classList.value="modal__close",d.dataset.name="closeButton",d.ariaLabel="Close popup";const s=document.createElement("span");s.classList.value="modal__close__icon",s.setAttribute("aria-hidden","true");const l=document.createElement("h2");l.classList.value="modal__title",l.innerText="Alert",l.setAttribute("id",`${t}-title`);const i=document.createElement("p");if(i.innerHTML=`You have clicked <strong>${e.value} times</strong> to related button.`,i.setAttribute("id",`${t}-describe`),d.appendChild(s),n.appendChild(d),n.appendChild(l),n.appendChild(i),e.value>5){const e=document.createElement("button");e.classList.value="button button--red",e.dataset.name="resetButton",e.innerHTML="Reset counter",n.appendChild(e)}const u=c();document.body.appendChild(u);try{const e=await r("https://jsonplaceholder.typicode.com/users"),t=o(e);n.appendChild(t)}catch(e){const t=document.createElement("p");t.classList.add("error"),t.innerText=`data loading error [${e.message}]`,n.appendChild(t)}return document.body.removeChild(u),a.appendChild(n),a})(n(s),s);e.appendChild(u),u.querySelector("button").focus(),u.addEventListener("click",(e=>(({target:e},t)=>{(t.querySelector('[data-name="closeButton"]').contains(e)||e===t)&&a(t)})(e,u))),window.addEventListener("keydown",t),u.addEventListener("click",(({target:t})=>{var n;t===u.querySelector('[data-name="resetButton"]')&&(n=s,localStorage.setItem(n,0),a(u),d(e,s,!1))}))},o=e=>{const t=document.createElement("div");t.classList.value="modal__table-wrapper";const a=document.createElement("table"),n=document.createElement("tr");return n.innerHTML="<td>imie i nazwisko</td><td>email</td><td>adres</td><td>telefon</td><td>nazwa firmy</td>",a.appendChild(n),e.forEach((e=>{a.appendChild((e=>{const t=document.createElement("tr");return[e.name,e.email,e.address.city+", "+e.address.street+", "+e.address.suite,e.phone,e.company.name].forEach((e=>{const a=document.createElement("td");a.innerText=e,t.appendChild(a)})),t})(e))})),t.appendChild(a),t},r=async e=>fetch(e).then((e=>e.json())),c=()=>{const e=document.createElement("div");e.classList.value="loader",e.setAttribute("aria-hidden","true");const t=document.createElement("span");return t.classList.value="loader__spinner",e.appendChild(t),e};(e=>{e.forEach(((e,t)=>{const a=`swi${t}`;e.dataset.name=a,e.querySelector('[data-name="openButton"]').addEventListener("click",(()=>d(e,a)))}))})(e)})();