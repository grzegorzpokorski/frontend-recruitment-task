"use strict";const sections=document.querySelectorAll("section.section-with-image"),createModal=(e,t,a)=>{const l=document.createElement("aside"),n=(l.classList.value="modal",l.setAttribute("role","dialog"),l.setAttribute("aria-labelledby",t+"-title"),l.setAttribute("aria-describedby",t+"-describe"),l.setAttribute("aria-modal","true"),document.createElement("section")),o=(n.classList.value="header modal__content",document.createElement("button")),s=(o.classList.value="modal__close",o.dataset.name="closeButton",o.ariaLabel="Close popup",document.createElement("span")),r=(s.classList.value="modal__close__icon",document.createElement("h2")),d=(r.classList.value="modal__title",r.innerText="Alert",r.setAttribute("id",t+"-title"),document.createElement("p"));if(d.innerHTML=`You have clicked <strong>${a.value} times</strong> to related button.`,d.setAttribute("id",t+"-describe"),o.appendChild(s),n.appendChild(o),n.appendChild(r),n.appendChild(d),5<a.value){const c=document.createElement("button");c.classList.value="button button--red",c.dataset.name="resetButton",c.innerHTML="Reset counter",n.appendChild(c)}return l.appendChild(n),e.appendChild(l),l},getCounter=e=>localStorage.getItem(e)?{id:e,value:parseInt(localStorage.getItem(e))}:{id:e,value:0},incrementCounter=({id:e,value:t})=>{localStorage.setItem(e,t+1)},resetCounter=e=>{localStorage.setItem(e,0)},handleClose=({target:e},t)=>{var a=t.querySelector('[data-name="closeButton"]');if(e===t||e===a)closeModal(t);else do{if(e===a)return void closeModal(t)}while(null!=(e=e.parentNode))},closeModal=e=>{e.remove(),window.removeEventListener("keydown",handleEscapeKeyPress,!0)},handleEscapeKeyPress=({key:e})=>{"Escape"===e&&closeModal(document.querySelector('[role="dialog"]'))},handleOpen=(t,a,e=!1)=>{const l=document.querySelectorAll('[role="dialog"]'),n=(l&&l.forEach(e=>closeModal(e)),e||incrementCounter(getCounter(a)),createModal(t,a,getCounter(a)));n.focus(),n.addEventListener("click",e=>handleClose(e,n)),window.addEventListener("keydown",handleEscapeKeyPress,!0),n.addEventListener("click",({target:e})=>{e===n.querySelector('[data-name="resetButton"]')&&(resetCounter(a),closeModal(n),handleOpen(t,a,!0))})};sections.forEach((e,t)=>{const a="swi"+t,l=(e.dataset.name=a,e.querySelector('[data-name="openButton"]'));l.addEventListener("click",()=>{handleOpen(e,a)})});