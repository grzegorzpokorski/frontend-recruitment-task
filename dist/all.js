"use strict";const sections=document.querySelectorAll("section.section-with-image"),createModal=(e,t)=>{const n=document.createElement("aside"),a=(n.classList.value="modal",document.createElement("section")),l=(a.classList.value="header modal__content",document.createElement("button")),o=(l.classList.value="modal__close",l.dataset.name="closeButton",l.ariaLabel="Zamknij popup",document.createElement("span")),c=(o.classList.value="modal__close__icon",document.createElement("h3")),r=(c.classList.value="modal__title",c.innerText="Alert",document.createElement("p"));if(r.innerHTML=`You have clicked <strong>${t.value} times</strong> to related button.`,l.appendChild(o),a.appendChild(l),a.appendChild(c),a.appendChild(r),5<t.value){const s=document.createElement("button");s.classList.value="button",s.dataset.name="resetButton",s.innerHTML="Resetuj licznik",a.appendChild(s)}return n.appendChild(a),e.appendChild(n),n},getCounter=e=>localStorage.getItem(e)?{id:e,value:parseInt(localStorage.getItem(e))}:{id:e,value:0},incrementCounter=({id:e,value:t})=>{localStorage.setItem(e,t+1)},resetCounter=e=>{localStorage.setItem(e,0)},handleClose=({target:e},t)=>{var n=t.querySelector('[data-name="closeButton"]');if(e===t||e===n)t.remove();else do{if(e===n)return void t.remove()}while(null!=(e=e.parentNode))},handleOpen=(t,n,e=!1)=>{e||incrementCounter(getCounter(n));const a=createModal(t,getCounter(n));a.focus(),a.addEventListener("click",e=>handleClose(e,a));a.querySelector('[data-name="closeButton"]');a.addEventListener("click",({target:e})=>{e===a.querySelector('[data-name="resetButton"]')&&(resetCounter(n),a.remove(),handleOpen(t,n,!0))})};sections.forEach((e,t)=>{const n="swi"+t,a=(e.dataset.name=n,e.querySelector('[data-name="openButton"]'));a.addEventListener("click",()=>{handleOpen(e,n)})});