"use strict";const createModal=(e,t)=>{const a=document.createElement("aside"),o=(a.classList.value="modal",a.setAttribute("role","dialog"),a.setAttribute("aria-labelledby",t+"-title"),a.setAttribute("aria-describedby",t+"-describe"),a.setAttribute("aria-modal","true"),document.createElement("section")),l=(o.classList.value="header modal__content",document.createElement("button")),n=(l.classList.value="modal__close",l.dataset.name="closeButton",l.ariaLabel="Close popup",document.createElement("span")),r=(n.classList.value="modal__close__icon",document.createElement("h2")),d=(r.classList.value="modal__title",r.innerText="Alert",r.setAttribute("id",t+"-title"),document.createElement("p"));if(d.innerHTML=`You have clicked <strong>${e.value} times</strong> to related button.`,d.setAttribute("id",t+"-describe"),l.appendChild(n),o.appendChild(l),o.appendChild(r),o.appendChild(d),5<e.value){const s=document.createElement("button");s.classList.value="button button--red",s.dataset.name="resetButton",s.innerHTML="Reset counter",o.appendChild(s)}return a.appendChild(o),a},handleCloseModal=({target:e},t)=>{var a=t.querySelector('[data-name="closeButton"]');if(e===t||e===a)removeModal(t);else do{if(e===a)return void removeModal(t)}while(null!=(e=e.parentNode))},handleEscapeKeyPress=({key:e})=>{"Escape"===e&&removeModal(document.querySelector('[role="dialog"]'))},removeModal=e=>{e.remove(),window.removeEventListener("keydown",handleEscapeKeyPress)},getCounter=e=>localStorage.getItem(e)?{id:e,value:parseInt(localStorage.getItem(e))}:{id:e,value:0},incrementCounter=({id:e,value:t})=>{localStorage.setItem(e,t+1)},resetCounter=e=>{localStorage.setItem(e,0)},openModal=(t,a,e=!0)=>{const o=document.querySelectorAll('[role="dialog"]'),l=(o&&o.forEach(e=>removeModal(e)),e&&incrementCounter(getCounter(a)),createModal(getCounter(a),a));t.appendChild(l),l.querySelector("button").focus(),l.addEventListener("click",e=>handleCloseModal(e,l)),window.addEventListener("keydown",handleEscapeKeyPress),l.addEventListener("click",({target:e})=>{e===l.querySelector('[data-name="resetButton"]')&&(resetCounter(a),removeModal(l),openModal(t,a,!1))})},initModals=e=>{e.forEach((e,t)=>{const a="swi"+t,o=(e.dataset.name=a,e.querySelector('[data-name="openButton"]'));o.addEventListener("click",()=>openModal(e,a))})},sections=document.querySelectorAll("section.section-with-image");initModals(sections);